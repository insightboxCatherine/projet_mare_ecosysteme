CJSAPPS_ARR=["163","339","553"],CJSAPPS_PARENT={},CJSAPPS_PARENT[163]={},CJSAPPS_PARENT[339]={},CJSAPPS_PARENT[553]={},CJSAPPS_PARENT[553].AfterDocReady=function(e,t,n,r,o){var a={};a.log=DIGIOH_CUSTOM_JS.log;try{const v="iterable_proxy_integration_id",D="iterable_pageview_event",x="iterable_track_pageview_json",U="itrbl";let A="EU"===e.CONFIG.REGION?"https://eu-jsapi.lightboxcdn.com":"https://jsapi.lightboxcdn.com";/DEV_PROXY/.test(e.getQueryString())&&(A="https://localhost:44323",e.warnNotifyApp("Using dev proxy "+A));const G=A+"/it9nrcf8em5qe7t85c9/v1/iterable/GetUserByEmail",T=A+"/it9nrcf8em5qe7t85c9/v1/iterable/GetUserById",w=A+"/it9nrcf8em5qe7t85c9/v1/iterable/EventTrack",k=A+"/it9nrcf8em5qe7t85c9/v1/iterable/AddOrUpdateUser",H=10,M=e.getHostname(),N=e.getAccountGuid(),L=e.getAccountMetadata(D),R=e.getAccountMetadata(x);let j=e.getAccountMetadata(v+":"+M);if(e.isIterableProxyEnabled=function(){return!!j},j)s("Using Site-specific Iterable Integration ID "+j+" for "+M);else{if(j=e.getAccountMetadata(v),!j)return void i("Iterable App requires account metadata <strong>"+v+"</strong> : [https://help.digioh.com/knowledgebase/targeting-box-display-to-iterable-user-attributes-or-lists/|helpdoc]");s("Using Account-level Iterable Integration ID "+j)}if(e.validateEventPayloadJson=function(e,t){try{const n=JSON.parse(e);for(const e of Object.keys(n))/\./.test(e)&&l(t+":{ ... "+e+": ... } has a period which will cause problems with Iterable handlebar syntax [https://support.iterable.com/hc/en-us/articles/206430615-Events-and-Event-Properties-#event-properties|(help doc)]")}catch(e){return i("Invalid JSON for "+t),!1}return!0},R){if(!L)return void i("Must also configure "+D+" when using "+x);if(!e.validateEventPayloadJson(R,x+" (account metadata)"))return}L&&s("Tracking page views to Iterable with "+(R?"custom":"default")+" event payload");const B="d",F="jsonp";function s(t,n){t="Iterable App: "+t,n?n(t):e.infoNotifyApp(t),a.log(t)}function i(t){s(t,e.errorNotifyApp)}function l(t){s(t,e.warnNotifyApp)}function c(e){let t="<ul>";for(const n of Object.keys(e))"emailListIds"!=n&&"itblInternal"!=n&&"unsubscribedChannelIds"!=n&&"subscribedMessageTypeIds"!=n&&"unsubscribedMessageTypeIds"!=n&&"eventQueue"!=n&&(t+="<li><strong>"+n+"</strong>:"+e[n]+"</li>");const n=e.emailListIds||[];for(const e of n)t+="<li>lists.<strong>"+e+"</strong>:true</li>";return t+="</ul>",t}function u(t){if(!j)throw new Error("Must configure account metadata "+v+" to use this app");if(e.failTrack=e.failTrack||{},e.failTrack[t]>1)return i("Aborting proxy call due to failures"),void(e.iterableAsyncStatus="fail");e.iterableAsyncStatus="pending",r.ajax({dataType:"jsonp",url:t,success:function(n){if(n&&"object"==typeof n&&n.hasOwnProperty("success")&&n.success&&n.hasOwnProperty("payload")&&n.payload.hasOwnProperty("user")&&(n.payload.user.hasOwnProperty("email")||n.payload.user.hasOwnProperty("userId"))&&n.payload.user.hasOwnProperty("dataFields")){m(n.payload.user.dataFields),J(),h(),e.reload(),e.processOpenBoxes(),e.iterableAsyncStatus="done"}else"object"==typeof n&&n.error&&n.error.includes("encse")?i("Iterable App does not support SHA256 encryption, enabled for integration ID "+j+": disable or use a different integration"):(i("Did <strong>not</strong> find Iterable User"),e.failTrack[t]=e.failTrack[t]||0,e.failTrack[t]++,e.iterableAsyncStatus="fail")},error:function(t,n,r){i("Iterable API error: "+n),e.iterableAsyncStatus="fail"},complete:function(){e.LIGHTBOX.customJsOnDocumentReadyCallback()}})}function g(e){u(T+"?user_guid="+N+"&integration_id="+j+"&platform="+B+"&format="+F+"&userid="+e)}function d(e){u(G+"?user_guid="+N+"&integration_id="+j+"&platform="+B+"&format="+F+"&email="+e)}function m(e){e.email&&t.localStorage.setItem("_em",e.email),e.userId&&t.localStorage.setItem("_uid",e.userId),t.sessionStorage.setItem("_itrbl",JSON.stringify(e)),s("Stored Iterable profile in sessionStorage")}function p(){const e=t.sessionStorage.getItem("_itrbl");return e?JSON.parse(e):null}function I(){let e=t.localStorage.getItem("_em");if(!e){e=(p()||{}).email}return e||""}function f(e){if(e&&e.trim()){if(_()){s("Replacing identity "+(I()||b()||"unknown")+" with "+e),S(!0)}else s("Identifying as "+e),S(!1);t.localStorage.setItem("_em",e),d(e)}else i("Enter an email or userId")}function _(){return!!I()||!!b()}function y(e){if(_()){s("Replacing identity "+(I()||b()||"unknown")+" with "+e),S(!0)}else s("Identifying as userId "+e),S(!1);t.localStorage.setItem("_uid",e),g(e)}function b(){return t.localStorage.getItem("_uid")}function S(n){t.sessionStorage.removeItem("_itrbl"),t.localStorage.removeItem("_em"),t.localStorage.removeItem("_uid"),n&&t.localStorage.removeItem("_eq"),e[U]={known:"false",unknown:"true"},s("Cleared Iterable user profile")}function h(){const n=p();if(n){e[U].known="true",e[U].unknown="false",e[U].lists={},e[U].segments={};let o=0,a=0;for(const t of Object.keys(n))if("account"==t){var r=n[t];for(const t in r)e[U][t]=r[t].toString(),o++}else e[U][t]=n[t].toString(),o++;if(n.emailListIds&&n.emailListIds.length)for(const t of n.emailListIds)e[U].lists[t]="true",a++;t.top.tpau=e[U],s("Added "+o+" targetable attributes to DIGIOH_API."+U+" and "+a+" list ids to DIGIOH_API."+U+".lists")}}function O(t,n,o=null){if(!j)throw new Error("Must configure account metadata "+v+" to use this app");const a={};if(e.getIterableEmail())a.email=e.getIterableEmail();else{if(!e.getIterableUserId())return void C(t,n);a.userId=e.getIterableUserId()}a.eventName=t,a.createNewFields=!0,a.dataFields=n,o&&(o.updateEventId&&(a.id=o.updateEventId),o.createdAt&&(a.createdAt=o.createdAt));let l=w+"?user_guid="+N+"&integration_id="+j+"&platform="+B+"&format="+F+"&event_json_lz_encoded="+e.LIGHTBOX.LZString.compressToBase64(JSON.stringify(a));r.ajax({dataType:"jsonp",url:l,success:function(e){s("Tracked"+(o&&o.notificationContext?" "+o.notificationContext:"")+" event <strong>"+t+"</strong>"+c(n))},error:function(e,t,n){i("Iterable API error: "+t)}})}function C(e,t){const n={eventName:e,payloadObj:t,createdAt:Math.floor((new Date).getTime()/1e3)},r=E()||[];r.push(n),P(r)}function P(e){"object"==typeof e&&(e=JSON.stringify(e)),t.localStorage.setItem("_eq",e)}function E(){const e=t.localStorage.getItem("_eq")||"[]";return JSON.parse(e)}function J(){const e=E();if(e.length){s("Tracking queued events to Iterable...");for(let t=0;t<e.length&&t<=H;t++){const t=e.pop();O(t.eventName,t.payloadObj,{createdAt:t.createdAt,notificationContext:"queued"})}P(e)}}e.itaNotify=s,e.itaNotifyError=i,e.itaNotifyWarn=l,e.formatIterableUserDataHtml=c,e.openBoxes=[],e.registerOpenBox=function(t){e.openBoxes.push(t)},e.processOpenBoxes=function(){for(const t of e.openBoxes)"function"==typeof t.populateMergeTags&&t.populateMergeTags()},e.getIterableUserByUserId=g,e.getIterableUserByEmail=d,e.createOrUpdateIterableEmail=function(t,n){if("object"!=typeof(n=n||{}))throw new Error("createOrUpdateIterableEmail optionalUserAttributes parameter must be object");const o=k+"?user_guid="+N+"&integration_id="+j+"&platform="+B+"&format="+F+"&admin_debug=1&user_json_lz_encoded="+LZString.compressToBase64('{"email":"'+t+'", "dataFields":'+JSON.stringify(n)+"}");if(!j)throw new Error("Must configure account metadata "+v+" to call createOrUpdateIterableEmail");r.ajax({dataType:"jsonp",url:o,success:function(n){n&&"object"==typeof n&&n.success?(/DEBUG/.test(e.getQueryString())&&e.debugger(),setTimeout((function(){d(t)}),3e3)):"object"==typeof n&&n.error&&n.error.includes("encse")?i("Iterable App does not support SHA256 encryption, enabled for integration ID "+j+": disable or use a different integration"):(/DEBUG/.test(e.getQueryString())&&e.debugger(),i("Failed to create/update Iterable user "+t))},error:function(e,t,n){i("Iterable API error: "+t)},complete:function(){}})},e.storeIterableProfile=m,e.getIterableProfile=p,e.getIterableEmail=I,e.setIterableEmail=f,e.setIterableUserId=y,e.getIterableUserId=b,e.clearIterableData=S,e.generateTargetableAttributes=h,e.trackIterableEvent=O,e.trackIterableEventDirect=function(t,n,o={}){if(!j)throw new Error("Must configure account metadata "+v+" to use this app");if(!t)throw new Error("api.trackIterableEventDirect requires emailOrUserId argument");if(!n)throw new Error("api.trackIterableEventDirect requires eventName argument");const a={};/@/.test(t)?a.email=t:a.userId=t,a.eventName=n,a.createNewFields=!0,a.dataFields=o;let l=w+"?user_guid="+N+"&integration_id="+j+"&platform="+B+"&format="+F+"&event_json_lz_encoded="+e.LIGHTBOX.LZString.compressToBase64(JSON.stringify(a));r.ajax({dataType:"jsonp",url:l,success:function(e){s("Direct event track for "+t+": event <strong>"+n+"</strong>"+c(o))},error:function(e,t,n){i("Iterable API error: "+t)}})},e.queueIterableEvent=C,e.getIterableEventQueue=E,e.processIterableQueuedEvents=J,e[U]={},e[U].lists={},e[U].known=!1,e[U].unknown=!0,t.top.tpau=e[U];const q=/\s*[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\s*/;if(e.isIterableProxyEnabled()){const z=/[<>]/,Q=function(){let t=e.getUrlParameter("email");return q.test(t)?t:(t=atob(t),q.test(t)?t:"")}();Q&&!z.test(Q)&&(S(!1),f(Q),e.hideUrlParameter("email"),e.iterableAsyncStatus=null);const Z=e.getUrlParameter("userId");if(Z&&!z.test(Z)&&(S(!1),y(Z),e.hideUrlParameter("userId"),e.iterableAsyncStatus=null),function(){if(!e.isQaMode())return;const t=n.createElement("div");t.id="digiohDialog",t.innerHTML='\n        <div id="digiohIterableController" style="position: fixed; top: 10px; left: 10px; z-index: 9999; padding: 20px; text-align: center; background-color: #f9f9f9; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); border-radius: 8px; font-family: Arial">\n            <button id="digiohCloseButton" style="position: absolute; top: 8px; right: 8px; padding: 5px; font-weight: bold; border: none; border-radius: 50%; background-color: #ccc; color: black; cursor: pointer;">X</button>\n            \n            <h1 style="font-size: 24px; font-weight: bold; margin-bottom: 20px;">Digioh-Iterable Control Panel</h1>\n        \n            <div style="margin-bottom: 10px;">\n                <div id="digiohEmail" style="margin-bottom: 10px;"><span style="font-weight: bold;">Email:</span> [Email]</div>\n                <div id="digiohUserId" style="margin-bottom: 10px;"><span style="font-weight: bold;">UserID:</span> [UserID]</div>\n            </div>\n        \n            <button id="digiohForgetUser" class="button2" style="margin-bottom: 20px; padding: 8px 20px; font-weight: bold; border: none; border-radius: 4px; background-color: #f44336; color: white; cursor: pointer;">Forget User</button>\n            <button id="digiohShowUserData" class="button4" style="padding: 8px 20px; font-weight: bold; border: none; border-radius: 4px; background-color: #3f51b5; color: white; cursor: pointer;">Show User Data</button>\n        \n            <div style="margin-bottom: 20px;">\n                    <div class="form_inputs_wrapper form_spacing" style="margin-bottom: 10px;">\n                        <input id="digiohEmailOrUserid" class="form_inputs" placeholder="Identify by email or userId" style="width: 200px; padding: 10px; border: 1px solid #ccc; border-radius: 4px;">\n                        <button id="digiohIdentifyUser" class="button" style="margin-bottom: 10px; padding: 8px 20px; font-weight: bold; border: none; border-radius: 4px; background-color: #4CAF50; color: white; cursor: pointer;" aria-label="Submit Modal Form">Identify User</button>\n                    </div>\n            </div>\n        </div>\n        ',n.body.appendChild(t),n.getElementById("digiohForgetUser").addEventListener("click",(function(){e.clearIterableData(!0)})),n.getElementById("digiohIdentifyUser").addEventListener("click",(function(){const t=r("#digiohEmailOrUserid").val().trim();t?/@/.test(t)?q.test(t)?e.setIterableEmail(t):i("Enter a valid email address"):t.length>40?i("Enter a valid userId (max 40 chars)"):e.setIterableUserId(t):i("Enter an email address or Iterable userId")})),n.getElementById("digiohShowUserData").addEventListener("click",(function(){p()?s(c(p())):l("User is unknown");const e=E();let t="<strong>Event Queue</strong><ul>";if(e.length){for(let n=e.length-1;n>=0;n--){const r=e[n];t+="<li><strong>"+r.eventName+"</strong>: "+JSON.stringify(r.payloadObj)+"</li>"}t+="</ul>",s(t)}else s("No queued events")})),n.getElementById("digiohCloseButton").addEventListener("click",(function(){n.getElementById("digiohDialog").style.display="none"})),setInterval((function(){let t=e.getIterableEmail(),n=e.getIterableUserId();t&&t.trim()||(t="(unknown)"),n&&n.trim()||(n="(unknown)"),r("#digiohEmail").html("<strong>email:</strong> "+t),r("#digiohUserId").html("<strong>userId:</strong> "+n)}),500)}(),"fail"==e.iterableAsyncStatus)return;if(e.iterableAsyncStatus||s("Activated: <a href=https://help.digioh.com/knowledgebase/targeting-box-display-to-iterable-user-attributes-or-lists/>documentation</a>"),function(){if("object"==typeof t.digiohEventQueue&&t.digiohEventQueue.length)for(const n of t.digiohEventQueue)n.hasOwnProperty("eventName")&&n.hasOwnProperty("eventPayload")?(O(n.eventName,n.eventPayload),t.digiohEventQueue=[]):e.errorNotifyApp("Invalid window.digiohEventQueue, expect [{eventName:string,eventPayload:{...}], found "+JSON.stringify(t.digiohEventQueue))}(),function(){const t=!!L,n=p()?O:C,r={notificationContext:"pageview"};if(t)if(R)if(/\[\S+\]/.test(R))if("function"!=typeof e.replaceMergeTagsInString)e.errorNotifyApp("Box has [MERGE_TAGS], but UMT app not installed ([https://help.digioh.com/knowledgebase/digioh-universal-merge-tags/|help doc])");else{const t=e.replaceMergeTagsInString(R),o=JSON.parse(t);n(L,o,r)}else{const e=JSON.parse(R);n(L,e,r)}else{const t={page_path:e.getPagePath()};n(L,t,r)}}(),p())s("Got Iterable User Profile"),h(),J();else{const X=I(),W=b();if(W)return g(W),"async_callback";if(X)return d(X),"async_callback";s("No saved Iterable profile, email, or userId available")}if(e.isSPA){s("Starting Iterable SPA monitor...");const $=setInterval((function(){a.log("Iterable App: Monitor heartbeat "+I()+":"+b()+":profile="+!!p()),p()?clearInterval($):b()?(s("SPA monitor found userId "+b()+" calling iterable"),g(b())):I()&&(s("SPA monitor found email "+I()+" calling iterable"),d(I()))}),1e4)}}else s("Iterable targeting app installed but not enabled (need account metadata iterable_proxy_integration_id)")}catch(V){return DIGIOH_CUSTOM_JS.logError(V,"custom_js_parent_apps"),V.message="DIGIOH: Custom JS Apps #553 (Parent: AfterDocReady) -- "+V.message,t.console.error(V),!0}},DIGIOH_CUSTOM_JS={runCustomJsOnDocumentReady:function(e,t,n,r,o){try{var a={};a.log=DIGIOH_CUSTOM_JS.log;var s=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage;DIGIOH_API.lang=s.split("-")[0],DIGIOH_API.locale=s.split("-")[1],DIGIOH_API.urlLocale=location.pathname.match(/^\/([a-z][a-z])\//),DIGIOH_API.urlLocale&&DIGIOH_API.urlLocale.length>1?DIGIOH_API.urlLocale=DIGIOH_API.urlLocale[1]:DIGIOH_API.urlLocale="";var l="custom",c="59114",u="spa_1ngIe5nI8Gmf0Q8RzqW3IorrZjt",g="js",d="email",m="phone";var p="custom_19",I="custom_20";if(a.log("Segment GJS App V1.0"),e.segmentPersonaIntegrationId=c,e.segmentSpaceId=u,e.segmentFieldMap={custom_1:"[]",custom_2:"[]",custom_3:"[]",custom_4:"[]",custom_5:"[]",custom_6:"[]",custom_7:"[]",custom_8:"[]",custom_9:"[]",custom_10:"[0]",custom_18:"properties",custom_19:"anonymousId",custom_20:"userId"},function(){switch(l){case"email":case"base64email":break;case"custom":if("check"=={anonymousId:(t={email:"check"})[p],userId:t[I]})throw new Error("You must implemement function getSegmentCustomId(x)");break;default:throw new Error("Invalid SEGMENT_ID_FORMAT "+l)}var t;switch(g){case"js":case"api":break;default:throw new Error("Invalid SEGMENT_INTEGRATION_METHOD js")}for(i=1;i<=10;i++)-1!=e.segmentFieldMap["custom_"+i].indexOf("[SEG_PROP_CUSTOM_")&&(e.segmentFieldMap["custom_"+i]="digiohFieldCustom"+i)}(),e.segProps=e.segProps||{},e.selectedTraits=(...e)=>t=>e.reduce(((e,n)=>({...e,[n]:t[n]})),{}),e.getSegmentTraits=e.getSegmentTraits||function(n){if(e.traits)return!0;if(t.sessionStorage){var o=t.sessionStorage.getItem("_digiohsegtraits");if(o)try{return e.traits=JSON.parse(atob(o)),!0}catch(n){a.log("Bad trait JSON: "+n),t.sessionStorage.removeItem("_digiohsegtraits"),e.traits={}}}var s="https://jsapi.lightboxcdn.com/seghf9svjz85ruu7m29/v1/segment/GetUserByExternalId?platform=d&format=jsonp";return s+="&user_guid="+e.getAccountGuid(),s+="&integration_id="+e.segmentPersonaIntegrationId,s+="&space_id="+e.segmentSpaceId,s+="&external_id=user_id:"+n,s+="&admin_debug=yes",a.log("Segment API call: "+s),r.ajax({url:s,timeout:1e3,dataType:"text",success:function(n,r,o){try{a.log("API data: "+n),t.raw=n,n=JSON.parse(n),n=JSON.parse(n.body),n=e.selectedTraits("is_member","web_country","web_locale","username","email","profile_subscription_status","lifetime_order_count")(n.traits),a.log("Segment API traits obj: "+JSON.stringify(n)),t.sessionStorage&&t.sessionStorage.setItem("_digiohsegtraits",btoa(JSON.stringify(n))),e.traits=n}catch(e){a.log("Segment API exception processing response: "+e)}finally{e.traits=e.traits||{},t.DIGIOH_API.LIGHTBOX.customJsOnDocumentReadyCallback()}},error:function(n,r,o){a.log("Segment API error: "+r+" : "+o),e.traits={},t.DIGIOH_API.LIGHTBOX.customJsOnDocumentReadyCallback()}}),!1},e.segIdentify=function(n,r,o){if(t.parent.analytics&&t.parent.analytics.identify){var s=e.segProps;for(var i in r)s[i]=r[i];t.parent.analytics.identify(n,s,o),a.log("segIdentify: "+n+" : "+JSON.stringify(e.segProps))}else a.error("Segment is not available yet!")},e.segTrack=function(n,r){if(t.parent.analytics&&t.parent.analytics.track){n=n||"Digioh Submit";var o=e.segProps;for(var s in r)o[s]=r[s];t.parent.analytics.track(n,o),a.log("segTrack: "+n+" : "+JSON.stringify(e.segProps))}},e.segAddProperty=function(t,n){t&&n?(e.segProps[t]=n,a.log("segAddProperty: "+t+"="+n)):a.log("ERROR: segAddProperty missing parameter")},a.log("segProcessSubmit: initializing"),e.segProcessSubmit=function(r,o,s){if(!r||!o||!s)return a.log("ERROR: processSegmentSubmit missing critical parameter, no data sent to Segment"),s;a.log("segProcessSubmit: "+r.getName()+" :: "+JSON.stringify(s)),s.email?(s.email=s.email.toLowerCase(),d&&e.segAddProperty(d,s.email),t.localStorage&&t.localStorage.setItem("_em",btoa(s.email))):t.localStorage&&(s.email=atob(t.localStorage.getItem("_em"))),s.phone&&m&&e.segAddProperty(m,s.phone),s.first_name&&e.segAddProperty("firstname",s.first_name),s.last_name&&e.segAddProperty("lastname",s.last_name),s.full_name&&e.segAddProperty("fullname",s.full_name),"true"!==s.opt_in&&"false"!==s.opt_in||e.segAddProperty("optin",s.opt_in);var i=null;if(r.isMainPage()&&(i="custom"),r.isExtraPage(1)&&(i="ep1_custom"),r.isExtraPage(2)&&(i="ep2_custom"),r.isExtraPage(3)&&(i="ep3_custom"),r.isExtraPage(4)&&(i="ep4_custom"),i)for(field=1;field<=20;field++){var c=i+field,u=s["custom_"+field];if(u&&o[c]){a.log("segProcessSubmit: "+c+".label="+o[c].label+" :: x.custom_"+field+"="+u);var g=o[c].label;g&&0!==g.indexOf("Custom ")?(g=g.toLowerCase(),a.log("segProcessSubmit: using label "+g+" for custom_"+field)):(g=e.segmentFieldMap["custom_"+field],a.log("segProcessSubmit: using fallback "+g+" for custom_"+field)),g?e.segAddProperty(g.toLowerCase(),u):a.log("ERROR: segProcessSubmit could not find label for "+c)}}if(t.parent.analytics?(s[p]=t.parent.analytics.user().anonymousId(),t.parent.analytics.user().id()&&(s[I]=t.parent.analytics.user().id())):(a.log("WARNING: Segment JS not found, no data sent from JS"),s[p]=e.getClientId()),s.email)switch(l){case"email":s[I]=s.email;break;case"base64email":s[I]=btoa(s.email);break;case"custom":break;default:a.error("Invalid Segment ID format specified!")}return s[I]||s[p]?(e.segIdentify(s[I],{},{context:{locale:n.documentElement.lang}}),e.segTrack("Sign Up Complete",{source:"digioh"})):e.segTrack("Digioh Partial"),s},e.segmentPersonaIntegrationId&&e.segmentSpaceId)try{_=function(){if(e.segmentUserId=t.parent.analytics.user().id()||"",e.segmentUserId&&!e.traits){if(!e.getSegmentTraits(e.segmentUserId))return a.log("Waiting for Segment API"),"async_callback";a.log("Segment traits from cache")}else a.log("No Segment userId")},y=setInterval((function(){void 0!==t.parent.analytics&&!0===t.parent.analytics.initialized&&(clearInterval(y),_())}),100)}catch(e){a.log(e.message)}if(setInterval((function(){(r("input[placeholder*='enter email']")||r("input[placeholder*='e.g. you@email.com']")||r("input[type=email]")||r("#ReduxFormInput10").length)&&r("input[placeholder*='enter email'],input[placeholder*='e.g. you@email.com'], input[type=email] , #ReduxFormInput10").each((function(e){let t=r(this).val();(function(e){return e=decodeURIComponent(e),/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)})(t)&&localStorage.setItem("digioh_email",t)}))}),1e3),t.location.href.indexOf("cart")>-1){var f=[];let e={operationName:"GetCart",variables:{},query:"query GetCart($shippingAddress: ShippingAddressInput) {\n  cart(shippingAddress: $shippingAddress) {\n    ...CartFields\n    __typename\n  }\n}\n\nfragment CartFields on Cart {\n  lineItems {\n    id\n    isQuantityEditable\n    isDigital\n    gaCode\n    quantity\n    total {\n      amount\n      currency\n      __typename\n    }\n    totalShipping {\n      amount\n      currency\n      __typename\n    }\n    undiscountedTotal {\n      amount\n      currency\n      __typename\n    }\n    details {\n      options\n      type\n      imageUrl\n      inventoryItemId\n      blankItemId\n      price {\n        amount\n        currency\n        __typename\n      }\n      marketingProductTypeId\n      marketingSku\n      productTypeId\n      productUrl\n      __typename\n    }\n    work {\n      id\n      title\n      artistName\n      __typename\n    }\n    __typename\n  }\n  summary {\n    showTaxSeparately\n    lineItemsCount\n    tax {\n      amount\n      currency\n      type\n      __typename\n    }\n    total {\n      amount\n      currency\n      __typename\n    }\n    subtotal {\n      amount\n      currency\n      __typename\n    }\n    undiscountedSubtotal {\n      amount\n      currency\n      __typename\n    }\n    shipping {\n      countryCode\n      countryName\n      estimated {\n        standard {\n          price {\n            amount\n            currency\n            __typename\n          }\n          tax {\n            amount\n            currency\n            type\n            __typename\n          }\n          amountExTax\n          __typename\n        }\n        express {\n          price {\n            amount\n            currency\n            __typename\n          }\n          tax {\n            amount\n            currency\n            type\n            __typename\n          }\n          amountExTax\n          __typename\n        }\n        __typename\n      }\n      selected {\n        estimatedCost {\n          price {\n            amount\n            currency\n            __typename\n          }\n          tax {\n            amount\n            currency\n            type\n            __typename\n          }\n          amountExTax\n          __typename\n        }\n        method\n        __typename\n      }\n      totals {\n        standard {\n          amount\n          currency\n          __typename\n        }\n        express {\n          amount\n          currency\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    digitalProductsOnly\n    __typename\n  }\n  appliedCoupon {\n    code\n    type\n    displayName\n    discount {\n      currency\n      amount\n      __typename\n    }\n    expiryDate\n    __typename\n  }\n  messages {\n    actionUrl\n    applied\n    severity\n    text\n    type\n    productName\n    __typename\n  }\n  __typename\n}\n"};fetch("https://www.redbubble.com/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{e.data.cart.lineItems.forEach((function(t){var n={artist_name:t.work?t.work.artistName:"",blank_item_id:t.details?t.details.blankItemId:"",brand:"Redbubble",categories:[t.details?t.details.type:""],coupon:e.data.cart.appliedCoupon?e.data.cart.appliedCoupon:"",currency:t.total?t.total.currency:"",id:t.details?t.details.marketingProductTypeId:"",imageUrl:t.details?t.details.imageUrl:"",image_url:t.details?t.details.imageUrl:"",is_licensed:!1,is_safe_for_work:!0,name:t.work?t.work.title:"",price:t.details?t.details.price.amount:0,product_type_id:t.details?t.details.productTypeId:"",quantity:t.quantity?t.quantity:1,sku:t.details?t.details.marketingSku:"",url:t.details?t.details.productUrl:"",variant:t.details?t.details.blankItemId:"",work_id:t.work?t.work.id:"",work_title:t.work?t.work.title:""};f.push(n)})),a.log("==shoppingCart=="),a.log(f),localStorage.setItem("digioh_abandon_cart",JSON.stringify({shoppingCartItems:f}))})).catch((function(e){a.log(e)}))}}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsOnDocumentReady"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}var _,y;return!0},runCustomJsBeforeLightboxDisplay:function(e,t,n,r,o,a,s){try{DIGIOH_CUSTOM_JS.log}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsBeforeLightboxDisplay"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}return!0},runCustomJsOnLightboxDisplay:function(e,t,n,r,o,a,s){try{DIGIOH_CUSTOM_JS.log}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsOnLightboxDisplay"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}},runCustomJsOnChangePages:function(e,t,n,r,o,a,s){try{DIGIOH_CUSTOM_JS.log}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsOnChangePages"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxSubmit:function(e,t,n,r,o,a,s){try{var i={};i.log=DIGIOH_CUSTOM_JS.log,i.log("after box submit")}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsOnLightboxSubmit"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxRedirect:function(e,t,n,r,o,a,s){try{DIGIOH_CUSTOM_JS.log}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsOnLightboxRedirect"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxDownload:function(e,t,n,r,o,a,s){try{DIGIOH_CUSTOM_JS.log}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsOnLightboxDownload"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxClose:function(e,t,n,r,o,a,s){try{DIGIOH_CUSTOM_JS.log}catch(e){DIGIOH_CUSTOM_JS.logError(e,"runCustomJsOnLightboxClose"),e.message="DIGIOH: Custom JS Parent -- "+e.message,t.console.error(e)}},log:function(e){DLOG.log(e,"CUSTOM_JS_PARENT")},logError:function(e,t){try{DLOG.log(e.message,"CUSTOM_JS_PARENT."+t+"()"),DLOG.logErrorFromCustomJsParent(e,"CUSTOM_JS_PARENT."+t)}catch(e){e.message="DIGIOH: Custom JS Parent -- "+e.message,window.console.error(e)}}},DIGIOH_CUSTOM_JS_SUPER={runCustomJsOnDocumentReady:function(e,t,n,r,o){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsOnDocumentReady"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}return!0},runCustomJsBeforeLightboxDisplay:function(e,t,n,r,o,a,s){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsBeforeLightboxDisplay"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}return!0},runCustomJsOnLightboxDisplay:function(e,t,n,r,o,a,s){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsOnLightboxDisplay"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}},runCustomJsOnChangePages:function(e,t,n,r,o,a,s){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsOnChangePages"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxSubmit:function(e,t,n,r,o,a,s){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsOnLightboxSubmit"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxRedirect:function(e,t,n,r,o,a,s){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsOnLightboxRedirect"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxDownload:function(e,t,n,r,o,a,s){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsOnLightboxDownload"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}},runCustomJsOnLightboxClose:function(e,t,n,r,o,a,s){try{DIGIOH_CUSTOM_JS_SUPER.log}catch(e){DIGIOH_CUSTOM_JS_SUPER.logError(e,"runCustomJsOnLightboxClose"),e.message="DIGIOH: Custom JS Global -- "+e.message,t.console.error(e)}},log:function(e){try{DLOG.log(e,"CUSTOM_JS_GLOBAL")}catch(e){e.message="DIGIOH: Custom JS Global -- "+e.message,window.console.error(e)}},logError:function(e,t){try{DLOG.log(e.message,"CUSTOM_JS_GLOBAL."+t+"()"),DLOG.logErrorFromCustomJsParent(e,"CUSTOM_JS_GLOBAL."+t)}catch(e){e.message="DIGIOH: Custom JS Global -- "+e.message,window.console.error(e)}}};